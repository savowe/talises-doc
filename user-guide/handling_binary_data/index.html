<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="author" content="Sascha Vowe">
    <link rel="canonical" href="https://sascha.vowe.eu/talises-doc/user-guide/handling_binary_data/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Handling binary data - TALISES Documentation</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="../..">TALISES Documentation</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../../../">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../installation/">Installation</a>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../generating_a_wave-function/">Generating a wave-function</a>
</li>

                        
                            
<li class="active">
    <a href="./">Handling binary data</a>
</li>

                        
                            
<li >
    <a href="../time-propagation/">Propagate the wave-function</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../examples/potential_barrier/">Potential barrier</a>
</li>

                        
                            
<li >
    <a href="../examples/1D_harmonic_trap/">Atom interferometry in 1D harmonic trap</a>
</li>

                        
                            
<li >
    <a href="../examples/2D_harmonic_trap/">Momentum transfer in 2D harmonic trap</a>
</li>

                        
                            
<li >
    <a href="../examples/Raman_transitions/">Stimulated Raman transitions</a>
</li>

                        
                            
<li >
    <a href="../examples/BEC_scattering/">Bose-Einstein condensate collision</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../about/license/">License</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../generating_a_wave-function/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../time-propagation/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/savowe/talises-doc/blob/master/docs/user-guide/handling_binary_data.md"><i class="fab fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#handling-binary-data">Handling binary data</a></li>
            <li class="second-level"><a href="#file-structure">File structure</a></li>
                
            <li class="second-level"><a href="#the-talisestools-package">The talisestools package</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="handling-binary-data">Handling binary data</h1>
<hr />
<p>The wave-functions used by TALISES are saved as binary data files.
The binaries do not only contain information of the wave-function amplitudes at every grid point,
but also contextual information like the time, position space size, sampling rate and more.<br />
The binary is comprised of a header containing this additional information and the body containing the wave-functions real and imaginary amplitude at every space point.</p>
<h3 id="file-structure">File structure</h3>
<p>The header is 1380 bytes long. Its structure is described in the <code>\include\my_structs.h</code> file.
It reads</p>
<pre><code>struct generic_header
{
  long long nself;    // size of struct
  long long nDatatyp; // size of data type
  long long nself_and_data;
  long long nDims;
  long long nDimX;
  long long nDimY;
  long long nDimZ;
  int       bAtom;
  int       bComplex;
  double    t;
  double    xMin;
  double    xMax;
  double    yMin;
  double    yMax;
  double    zMin;
  double    zMax;
  double    dx;
  double    dy;
  double    dz;
  double    dkx;
  double    dky;
  double    dkz;
  double    dt;
  int       ks; // coordinate system
  int       fs; // 1 -&gt; fourier space, 0 -&gt; real space
  double    M;  // mass in kinetic term
  double    T_scale  //arb. scaling of time unit;
  int       nFuture[99]; // Buffer
  double    dFuture[98];
};
</code></pre>

<p>Much of this information is necessary for TALISES in order to calculate the wave-functions time-propagation and some information is just useful for the user.
The binaries following the header represent the real and imaginary wave-function amplitudes, where each number is double float precision (8 Bytes).
For example, a wave-function represented by 256x256 grid points takes memory of<br />
<div>$$ 256\cdot 256 \cdot 2 \cdot 8 \,\mathrm{B} + 1380  \,\mathrm{B} = 10499568 \,\mathrm{B} \approx 1.026 \,\mathrm{kB}.$$ </div>  </p>
<p>As binary files are notoriously hard to read for the regular user, we provide a python package <a href="https://pypi.org/project/talisestools/">talisestools</a> that simplifies data handling.</p>
<h3 id="the-talisestools-package">The talisestools package</h3>
<p>The package can be install via</p>
<pre><code>pip install talisestools
</code></pre>

<p>It provides the following functions:</p>
<h4><strong>talisestools.readbin(binary_file, save=False)</strong>:</h4>
<p>The readbin function reads a TALESIS generated binary file containing one or multiple wavefunctions.
It returns a dictionary containing the binary data of wave-function amplitudes, time ect.
Optionally one can save the binary file as a .mat file.<br />
&nbsp;&nbsp;&nbsp;&nbsp;<strong>Paramters:</strong> binary_file: string of binary file name generated by TALISES<br />
&nbsp;&nbsp;&nbsp;&nbsp;<strong>Optional Paramters:</strong>  save: If <code>True</code>, saves binary file as a seperate .mat file. Default is <code>False</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<strong>Returns:</strong>  Dictionary with keys 
'wavefunction', 'nDims', 'nDimX', 'xMin', 'xMax', 'dx', 'M', 'T_scale', 't'.<br />
&nbsp;&nbsp;&nbsp;&nbsp; In the 2D and 3D case there will also be keys for 'nDimY' ect..  </p>
<h4><strong>talisestools.plotbin(binary_file)</strong>:</h4>
<p>plotbin is a fast way of plotting a TALISES generated binary file containing one wavefunction in 1D and 2D.
It generates a .png file of the same name.<br />
&nbsp;&nbsp;&nbsp;&nbsp;<strong>Paramters:</strong> binary_file: string of binary file name generated by TALISES<br />
&nbsp;&nbsp;&nbsp;&nbsp;<strong>Optional Paramters:</strong>  None<br />
&nbsp;&nbsp;&nbsp;&nbsp;<strong>Returns:</strong>  None   </p>
<h4><strong>talisestools.readall(n_int_state, save=False )</strong>:</h4>
<p>The readall function generalizes the readbin function. 
During computation of the wave-function's time propagation TALISES generates seperated binary files for the different internal states.
The files  end in <code>_1.bin</code>, <code>_2.bin</code> for the first, second ect. internal state.
The readall function takes an integer argument specifying this internal state and tries to find all binary file associated with it.
It then returns a dictionary containing the binary data of wave-function amplitudes, time ect. of all found binary files.
Optionally one can save the binary file as a .mat file.<br />
&nbsp;&nbsp;&nbsp;&nbsp;<strong>Paramters:</strong> n_int_state: integer specifying internal state<br />
&nbsp;&nbsp;&nbsp;&nbsp;<strong>Optional Paramters:</strong>  save: If <code>True</code>, saves binary file as a seperate .mat file. Default is <code>False</code><br />
&nbsp;&nbsp;&nbsp;&nbsp;<strong>Returns:</strong>  Dictionary with keys 
'wavefunction', 'nDims', 'nDimX', 'xMin', 'xMax', 'dx', 'M', 'T_scale', 't'.<br />
&nbsp;&nbsp;&nbsp;&nbsp; In the 2D and 3D case there will also be keys for 'nDimY' ect..  </p></div>
        
        
    </div>

    <footer class="col-md-12 text-center">
        
        <hr>
        <p>
        <small>Sascha Vowe</small><br>
        
        <small>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</small>
        </p>

        
        
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>
    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    
    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
